<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Вход — Тест</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="card">
  <h2>Вход в тест</h2>

  <label>⏱ Время на вопрос (сек)</label>
  <div class="row">
    <select id="preset">
      <option value="10">10</option>
      <option value="20">20</option>
      <option value="30" selected>30</option>
      <option value="60">60</option>
    </select>
    <input id="custom" type="number" min="5" placeholder="или своё">
  </div>

  <p class="muted">Авторизация через Telegram</p>
  <div id="widget"></div>
</div>

<script>
window.onTelegramAuth = function(user){
    localStorage.setItem('tgUser', JSON.stringify({
        id: user.id,
        first_name: user.first_name,
        username: user.username || ''
    }));

    const custom = parseInt(document.getElementById('custom').value);
    const preset = parseInt(document.getElementById('preset').value);
    localStorage.setItem('timer', custom || preset || 30);

    location.href = 'test.html';
};

const s = document.createElement('script');
s.src = 'https://telegram.org/js/telegram-widget.js?22';
s.async = true;
s.setAttribute('data-telegram-login', 'ChecklistforI0324_bot');
s.setAttribute('data-size', 'medium');
s.setAttribute('data-userpic', 'false');
s.setAttribute('data-request-access', 'write');
s.setAttribute('data-onauth', 'onTelegramAuth(user)');
document.getElementById('widget').appendChild(s);
</script>

</body>
</html>